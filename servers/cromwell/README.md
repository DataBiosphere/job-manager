# Job Manager API Server: `cromwell`

Thin shim around [`cromwell`](https://github.com/broadinstitute/cromwell).

## Development
For cromwell setup see the Cromwell README:
1. Create a local job-manager dir: `mkdir /private/etc/job-manager/`
1. Then add a config.json file with the Cromwell username and password:
```
{
  "cromwell_user" : "USERNAME",
  "cromwell_password" : "PASSWORD"
}
```

## Running Tests
To run unit and integration tests on the python-flask app, install
[`tox`](https://github.com/tox-dev/tox).
```
cd servers/cromwell
tox -- -s
```

## Generating `requirements.txt`

`requirements.txt` is autogenerated from `requirements-to-freeze.txt`. The
latter lists only direct dependencies. To regenerate run:
```
virtualenv --python=/usr/bin/python2 /tmp/cromwell-server-requirements
source /tmp/cromwell-server-requirements/bin/activate
pip install -r servers/cromwell/requirements-to-freeze.txt
pip freeze | sort > servers/cromwell/requirements.txt
deactivate
```
